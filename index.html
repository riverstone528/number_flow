<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>ÎÑòÎ≤Ñ ÌîåÎ°úÏö∞</title>
<link href="https://fonts.googleapis.com/css2?family=Gaegu:wght@400;700&family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
<style>
  :root {
    --bg:       #fff9f0;
    --surface:  #ffffff;
    --card:     #fffdf8;
    --border:   #f0e6d3;
    --sky:      #5bc8f5;
    --grass:    #6dd47e;
    --sun:      #ffcc44;
    --coral:    #ff7c6e;
    --lavender: #b39ddb;
    --peach:    #ffb347;
    --text:     #3d2c1e;
    --muted:    #b0948a;
    --white:    #ffffff;
  }

  /* [ÌïµÏã¨ ÏàòÏ†ï] Î™®Î∞îÏùº ÌôîÎ©¥ Í≥†Ï†ï ÏÑ§Ï†ï */
  html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100dvh; /* Ï£ºÏÜåÏ∞Ω Ï†úÏô∏ Ïã§Ï†ú ÎÜíÏù¥ Í≥†Ï†ï */
    overflow: hidden; /* Ïä§ÌÅ¨Î°§ Ï∞®Îã® */
    position: fixed; /* Ï†ÑÏ≤¥ ÌôîÎ©¥ Í≥†Ï†ï */
    overscroll-behavior: none; /* Î∞îÏö¥Ïä§ Î∞©ÏßÄ */
  }

  * { 
    margin:0; 
    padding:0; 
    box-sizing:border-box; 
    -webkit-tap-highlight-color:transparent; 
  }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Noto Sans KR', sans-serif;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    touch-action: none; /* Î∏åÎùºÏö∞Ï†Ä Í∏∞Î≥∏ ÌÑ∞Ïπò ÎèôÏûë(Ïä§ÌÅ¨Î°§ Îì±) Ï∞®Îã® */
  }

  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background:
      radial-gradient(ellipse 60px 40px at 10% 12%, rgba(91,200,245,0.18) 0%, transparent 100%),
      radial-gradient(ellipse 90px 55px at 80% 8%,  rgba(91,200,245,0.13) 0%, transparent 100%),
      radial-gradient(ellipse 50px 35px at 55% 5%,  rgba(91,200,245,0.10) 0%, transparent 100%),
      radial-gradient(circle 3px at 20% 25%, rgba(255,204,68,0.6) 0%, transparent 100%),
      radial-gradient(circle 2px at 75% 18%, rgba(255,204,68,0.5) 0%, transparent 100%),
      radial-gradient(circle 3px at 45% 35%, rgba(255,204,68,0.4) 0%, transparent 100%),
      radial-gradient(circle 2px at 90% 40%, rgba(255,204,68,0.5) 0%, transparent 100%);
    pointer-events: none;
    z-index: 0;
  }

  .app {
    width: 100%;
    max-width: 420px;
    height: 100dvh; /* ÎÜíÏù¥ Í≥†Ï†ï */
    display: flex;
    flex-direction: column;
    position: relative;
    z-index: 1;
    overflow: hidden; /* ÎÇ¥Î∂Ä Ïä§ÌÅ¨Î°§ Î∞©ÏßÄ */
  }

  .screen { display: none; flex-direction: column; flex: 1; height: 100%; }
  .screen.active { display: flex; }

  /* HOME */
  .logo-wrap { text-align: center; padding: 0.5rem 0 0; }
  .logo-icon {
    display: block;
    margin: 0 auto;
    animation: float 3s ease-in-out infinite;
    filter: drop-shadow(0 8px 16px rgba(91,200,245,0.25)) drop-shadow(0 4px 8px rgba(255,124,110,0.2));
    width: 110px; height: 110px;
  }
  @keyframes float { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-8px)} }
  .logo-title {
    font-family: 'Gaegu', cursive;
    font-size: 2.4rem;
    font-weight: 700;
    color: var(--coral);
    text-shadow: 3px 3px 0 rgba(255,124,110,0.2);
    margin-top: 0.2rem;
  }
  .logo-sub { font-family: 'Gaegu', cursive; font-size: 1rem; color: var(--muted); margin-top: 0.1rem; }
  .home-desc {
    background: var(--white);
    border: 2.5px solid var(--border);
    border-radius: 20px;
    padding: 1rem 1.2rem;
    font-size: 0.88rem;
    color: var(--muted);
    line-height: 1.8;
    text-align: center;
    box-shadow: 0 4px 0 var(--border);
    position: relative;
  }
  .home-desc::before { content:'üí°'; position:absolute; top:-14px; left:50%; transform:translateX(-50%); font-size:1.3rem; }
  .home-desc strong { color: var(--coral); font-weight: 700; }
  .section-label { font-family:'Gaegu',cursive; font-size:1.1rem; color:var(--muted); margin-bottom:0.2rem; }
  .levels-grid { display:flex; flex-direction:column; gap:0.8rem; width:100%; }
  .level-btn {
    background: var(--white);
    border: 2.5px solid var(--border);
    border-radius: 20px;
    padding: 1rem 1.2rem;
    cursor: pointer;
    transition: transform 0.15s, box-shadow 0.15s;
    display: flex;
    align-items: center;
    gap: 0.9rem;
    text-align: left;
    position: relative;
    overflow: hidden;
    box-shadow: 0 4px 0 var(--border);
  }
  .level-btn:active { transform:translateY(3px); box-shadow:0 1px 0 var(--border); }
  .level-btn::before { content:''; position:absolute; left:0; top:0; bottom:0; width:5px; border-radius:20px 0 0 20px; }
  #btn-easy::before   { background: var(--grass); }
  #btn-medium::before { background: var(--sky); }
  #btn-hard::before   { background: var(--coral); }
  .level-btn.locked { cursor:not-allowed; pointer-events:none; opacity:0.6; padding-bottom:2.6rem; }
  .level-btn.locked .level-icon,
  .level-btn.locked .level-info,
  .level-btn.locked .level-best { opacity:0.4; }
  .level-icon { font-size:2rem; flex-shrink:0; }
  .level-info { flex:1; display:flex; flex-direction:column; gap:0.2rem; }
  .level-top  { display:flex; align-items:center; gap:0.5rem; }
  .level-name { font-family:'Gaegu',cursive; font-size:1.2rem; font-weight:700; color:var(--text); }
  .level-stars { font-size:0.65rem; color:var(--sun); letter-spacing:2px; }
  .level-desc  { font-size:0.75rem; color:var(--muted); line-height:1.4; }
  .level-best  { font-family:'Gaegu',cursive; font-size:0.95rem; font-weight:700; color:var(--peach); flex-shrink:0; white-space:nowrap; }
  .level-lock-bar {
    display:none; position:absolute; bottom:0; left:0; right:0;
    background:rgba(255,124,110,0.08); border-top:2px dashed rgba(255,124,110,0.3);
    border-radius:0 0 18px 18px; padding:0.4rem 1rem;
    flex-direction:row; align-items:center; gap:0.4rem; z-index:2;
  }
  .level-btn.locked .level-lock-bar { display:flex; }
  .lock-icon { font-size:0.8rem; }
  .lock-text  { font-family:'Gaegu',cursive; font-size:0.85rem; color:var(--coral); font-weight:700; }

  /* GAME SCREEN */
  #gameScreen { padding:0; position:relative; background:var(--bg); }
  .game-header {
    padding:0.9rem 1.2rem; display:flex; align-items:center; gap:0.8rem;
    background:var(--white); border-bottom:2.5px solid var(--border);
  }
  .back-btn {
    width:40px; height:40px; border-radius:50%;
    border:2.5px solid var(--border); background:var(--bg); color:var(--text);
    font-size:1.1rem; cursor:pointer; display:flex; align-items:center; justify-content:center;
    flex-shrink:0; transition:transform 0.15s; box-shadow:0 3px 0 var(--border);
  }
  .back-btn:active { transform:translateY(2px); box-shadow:0 1px 0 var(--border); }
  .game-info { flex:1; }
  .level-label { font-family:'Gaegu',cursive; font-size:0.8rem; color:var(--muted); }
  .puzzle-num  { font-family:'Gaegu',cursive; font-size:1.1rem; font-weight:700; color:var(--text); }
  .timer-wrap {
    padding:0.65rem 1.2rem; background:var(--white); border-bottom:2.5px solid var(--border);
    display:flex; align-items:center; gap:0.8rem;
  }
  .timer-label { font-family:'Gaegu',cursive; font-size:0.8rem; color:var(--muted); flex-shrink:0; width:4.5rem; }
  .timer-val {
    font-family:'Gaegu',cursive; font-size:1.2rem; font-weight:700; color:var(--text);
    flex-shrink:0; width:6rem; text-align:right; font-variant-numeric:tabular-nums; white-space:nowrap;
  }
  .q-dots { display:flex; gap:7px; align-items:center; flex:1; justify-content:center; }
  .q-dot { width:10px; height:10px; border-radius:50%; background:var(--border); transition:all 0.3s; }
  .q-dot.done    { background:var(--grass); box-shadow:0 0 0 2px rgba(109,212,126,0.3); }
  .q-dot.current { background:var(--sun); box-shadow:0 0 0 3px rgba(255,204,68,0.3); transform:scale(1.35); }
  .target-area {
    margin:1rem 1.2rem 0.5rem;
    background:var(--white); border:2.5px solid var(--border); border-radius:24px;
    padding:1rem 1.5rem; display:flex; flex-direction:column; align-items:center; gap:0.5rem;
    box-shadow:0 4px 0 var(--border); transition:border-color 0.2s, background 0.2s;
  }
  .target-label { font-family:'Gaegu',cursive; font-size:0.85rem; color:var(--muted); }
  @keyframes slideInDown {
    0%  { transform:translateY(-20px); opacity:0; }
    60% { transform:translateY(2px);   opacity:1; }
    100%{ transform:translateY(0);     opacity:1; }
  }
  .target-area.slide-in { animation:slideInDown 0.35s cubic-bezier(0.22,1,0.36,1) forwards; }
  @keyframes wrongShake {
    0%,100%{transform:translateX(0)} 15%{transform:translateX(-8px)} 35%{transform:translateX(8px)} 55%{transform:translateX(-5px)} 75%{transform:translateX(5px)}
  }
  .target-area.wrong { animation:wrongShake 0.4s ease; border-color:var(--coral); background:rgba(255,124,110,0.06); }
  .hint-formula { display:flex; align-items:center; justify-content:center; gap:0.5rem; flex-wrap:wrap; }
  .hint-box {
    font-family:'Gaegu',cursive; font-size:2rem; font-weight:700;
    min-width:3rem; height:3.2rem; display:flex; align-items:center; justify-content:center;
    border-radius:14px; border:2.5px dashed var(--border); background:var(--bg); color:var(--muted);
    transition:all 0.15s; padding:0 0.4rem; box-shadow:0 3px 0 var(--border);
  }
  .hint-box.filled {
    border-style:solid; border-color:var(--sky); background:rgba(91,200,245,0.12); color:#1a8ab5;
    box-shadow:0 3px 0 rgba(91,200,245,0.4); animation:popIn 0.2s cubic-bezier(0.34,1.56,0.64,1);
  }
  @keyframes popIn { 0%{transform:scale(0.75)} 100%{transform:scale(1)} }
  .hint-box.wrong-flash {
    border-style:solid !important; border-color:var(--coral) !important;
    background:rgba(255,124,110,0.12) !important; color:var(--coral) !important;
    box-shadow:0 3
